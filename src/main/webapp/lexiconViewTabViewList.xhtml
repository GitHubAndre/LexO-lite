<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">


    <h:form id="lexiconTabViewForm">

        <p:panel id="tabViewPanel" styleClass="lexiconTabViewPanel" header="Multilingual Lexicon" 
                 widgetVar="languageHeader" style="margin-bottom:20px; overflow: hidden; min-width: 460px;">

            <p:tabView id="tabView" widgetVar="EditDictionaryTabView" activeIndex="#{lexiconControllerTabViewList.activeTab}" styleClass="lexiconTabView">
                <p:tab title="#{label['lexicon.tabviewlist.header.document']}" id="tabViewDocument" >
                    <h:panelGrid id="documentGrid" columns="4" style="padding-top: 10px;" rendered="#{lexiconControllerTabViewList.enabledFilter}">
                        <p:inputText id="documentFilter" value="#{lexiconControllerTabViewList.lemmaField}">
                            <p:ajax event="keyup" 
                                    update="lexiconTabViewForm:tabView:documentTree lexiconTabViewForm:tabView:documentFilterLabel" />
                        </p:inputText>
                        <p:watermark id="documentFilterWatermark" class="filterLabel" for="documentFilter" value="Search for text"/>
                        <p:commandButton icon="ui-icon-refresh"  
                                         onstart="PF('loadingDialog').show()" oncomplete="PF('loadingDialog').hide()" title="Refresh texts list"
                                         update="lexiconTabViewForm:tabView:documentTree lexiconTabViewForm:tabView:documentGrid"/>
                        <p:outputLabel id="documentFilterLabel" value="#{lexiconControllerTabViewList.lemmaCounter}" styleClass="filterLabel" for="documentFilter"/>
                    </h:panelGrid>
                    <p:separator style="border: 0;clear: both;padding: 0.4%;background-color: white"/>

                    <p:scrollPanel  id="scrollPanelDocumentTree" mode="native"  styleClass="roundedBox">
                        <p:tree id="documentTree" value="#{lexiconControllerTabViewList.textRoot}" 
                                var="doc" selectionMode="single" style="width: 100%;" dynamic="true"
                                selection="#{lexiconControllerTabViewList.selection}">
                            <p:ajax event="select"
                                    onstart="PF('loadingDialog').show()" oncomplete="setHeight();PF('loadingDialog').hide()"
                                    update=":editViewTab :systemMessage" >
                            </p:ajax>
                            <f:attribute name="document" value="doc" />
                            <p:treeNode expandedIcon="fa fa-folder-open" collapsedIcon="fa fa-folder">
                                <h:outputText value="#{doc.name}"/>
                            </p:treeNode>
                            <p:treeNode type="document" icon="fa fa-file">
                                <h:outputText value="#{doc.name}" />
                            </p:treeNode>
                        </p:tree>
                        <p:contextMenu for="tabViewDocument">
                            <p:menuitem styleClass="lexiconTabView" value="Add folder" icon="fa fa-folder-plus" />
                            <p:menuitem styleClass="lexiconTabView" value="Remove folder" icon="fa fa-folder-minus"/>
                            <p:menuitem styleClass="lexiconTabView" value="Edit metadata" icon="fa fa-folder-minus"/>
                            <p:menuitem styleClass="lexiconTabView" value="Add document" icon="fa fa-file-upload"/>
                            <p:menuitem styleClass="lexiconTabView" value="Export" icon="fa fa-folder-plus" />
<!--                            <p:menuitem styleClass="lexiconTabView" value="Remove" icon="fa fa-folder-plus" />
                            <p:menuitem styleClass="lexiconTabView" value="Export" icon="fa fa-folder-plus" />-->
                        </p:contextMenu>
                    </p:scrollPanel>
                </p:tab>

                <p:tab title="#{label['lexicon.tabviewlist.header.lexicalentry']}" id="tabViewLemma" >
                    <h:panelGrid id="lemmaGrid" columns="4" style="padding-top: 10px;" rendered="#{lexiconControllerTabViewList.enabledFilter}">
                        <p:inputText id="lemmaFilter" value="#{lexiconControllerTabViewList.lemmaField}">
                            <p:ajax event="keyup" listener="#{lexiconControllerTabViewList.lemmaKeyupFilterEvent}" 
                                    update="lexiconTabViewForm:tabView:lemmaTree lexiconTabViewForm:tabView:lemmaFilterLabel" />
                        </p:inputText>
                        <p:watermark id="lemmaFilterWatermark" class="filterLabel" for="lemmaFilter" value="Search for lemma"/>
                        <p:commandButton icon="ui-icon-refresh" actionListener="#{lexiconControllerTabViewList.searchReset('Lemma')}"   
                                         onstart="PF('loadingDialog').show()" oncomplete="PF('loadingDialog').hide()" title="Refresh lemmas list"
                                         update="lexiconTabViewForm:tabView:lemmaTree lexiconTabViewForm:tabView:lemmaGrid"/>
                        <p:outputLabel id="lemmaFilterLabel" value="#{lexiconControllerTabViewList.lemmaCounter}" styleClass="filterLabel" for="lemmaFilter"/>
                    </h:panelGrid>
                    <p:separator style="border: 0;clear: both;padding: 0.4%;background-color: white"/>

                    <ui:include src="/lexiconViewLemmaFilter.xhtml"/>
                    <p:scrollPanel  id="scrollPanelLemmaTree" mode="native"  styleClass="roundedBox">
                        <p:tree id="lemmaTree" value="#{lexiconControllerTabViewList.lemmaRoot}" 
                                var="lemma" selectionMode="single" style="width: 100%;"
                                selection="#{lexiconControllerTabViewList.selection}">
                            <p:ajax event="select" listener="#{lexiconControllerTabViewList.onSelect}"
                                    onstart="PF('loadingDialog').show()" oncomplete="setHeight();PF('loadingDialog').hide()"
                                    update=":editViewTab :systemMessage" >
                            </p:ajax>
                            <f:attribute name="LexicalEntryType" value="Lemma" />
                            <p:treeNode id="treeNodeLemma" >
                                <span class="colorCircle" style="background-color:#990000;"/>
                                <h:outputText styleClass="#{!lemma.verified.equals('false') ? 'colorCircleTextLemmaVerified' : 'colorCircleText'}" value="#{lemma.name}"/>
                                <span>
                                    <h:outputText style="vertical-align: sub; font-style: italic; font-size: 9px; padding-right: 3px;" 
                                                  value="#{lexiconControllerTabViewList.getPosFromIndividual(lemma.OWLname, lemma.language)}"/>
                                    <h:outputText style="font-style: italic; #{lexiconControllerTabViewList.getLanguageColor(lemma.language)}" 
                                                  value="@#{lemma.language}"/>
                                </span>
                            </p:treeNode>
                        </p:tree>
                    </p:scrollPanel>
                </p:tab>
                <p:tab title="#{label['lexicon.tabviewlist.header.form']}" id="tabViewVariant" >
                    <h:panelGrid id="formGrid" columns="4" style="padding-top: 10px;" 
                                 rendered="#{lexiconControllerTabViewList.enabledFilter}">
                        <p:inputText id="formFilter" value="#{lexiconControllerTabViewList.formField}">
                            <p:ajax event="keyup" listener="#{lexiconControllerTabViewList.formKeyupFilterEvent}" 
                                    update="lexiconTabViewForm:tabView:formTree lexiconTabViewForm:tabView:formFilterLabel" />
                        </p:inputText>
                        <p:watermark id="formFilterWatermark" class="filterLabel" for="formFilter" value="Search for variant"/>                        
                        <p:commandButton icon="ui-icon-refresh" actionListener="#{lexiconControllerTabViewList.searchReset('Form')}" 
                                         onstart="PF('loadingDialog').show()" oncomplete="PF('loadingDialog').hide()"  title="Refresh form list"
                                         update="lexiconTabViewForm:tabView:formTree lexiconTabViewForm:tabView:formGrid"/>
                        <p:outputLabel id="formFilterLabel" value="#{lexiconControllerTabViewList.formCounter}" styleClass="filterLabel" for="formFilter"/>
                    </h:panelGrid>
                    <p:separator style="border: 0;clear: both;padding: 0.4%;background-color: white"/>

                    <ui:include src="/lexiconViewFormFilter.xhtml"/>
                    <p:scrollPanel  id="scrollPanelFormTree" mode="native" styleClass="roundedBox">
                        <p:tree id="formTree" value="#{lexiconControllerTabViewList.formRoot}" var="form" selectionMode="single" 
                                selection="#{lexiconControllerTabViewList.selection}">
                            <p:ajax event="select" listener="#{lexiconControllerTabViewList.onSelect}"
                                    onstart="PF('loadingDialog').show()" oncomplete="setHeight();PF('loadingDialog').hide()"
                                    update=":editViewTab :systemMessage"/>
                            <f:attribute name="LexicalEntryType" value="Form" />
                            <p:treeNode>
                                <span class="colorCircle" style="background-color:#7286ad" />

                                <h:outputText styleClass="#{!form.verified.equals('false') ? 'colorCircleTextVariantVerified' : 'colorCircleText'}" value="#{form.name}"/>
                                <span>
                                    <h:outputText style="vertical-align: sub; font-style: italic; font-size: 9px; padding-right: 3px;" 
                                                  value="#{lexiconControllerTabViewList.getPosFromFormIndividual(form.OWLname, form.language)}"/>
                                    <h:outputText style="font-style: italic; #{lexiconControllerTabViewList.getLanguageColor(form.language)}" value="@#{form.language}"/>
                                </span>
                            </p:treeNode>
                        </p:tree>
                    </p:scrollPanel>
                </p:tab>

                <p:tab title="#{label['lexicon.tabviewlist.header.ontology']}" id="tabViewOntology" disabled="#{!lexiconControllerOntologyDetail.ontologyTabEnabled}">
                    <p:separator style="border: 0;clear: both;padding: 0.4%;background-color: white"/>
                    <ui:include src="/lexiconViewOntologyFilter.xhtml"/>
                    <p:separator style="border: 0;clear: both;padding: 0.4%;background-color: white"/>
                    <p:scrollPanel  id="scrollPanelOntologyTree" mode="native" style="overflow-x: hidden; overflow-y: auto;" styleClass="roundedBox">
                        <p:tree id="ontoTree" value="#{lexiconControllerTabViewList.ontoRoot}" var="ontoClass" selectionMode="single"
                                selection="#{lexiconControllerTabViewList.selection}" >
                            <p:ajax event="select" listener="#{lexiconControllerTabViewList.onOntoSelect}"
                                    onstart="PF('loadingDialog').show()" oncomplete="setHeight();PF('loadingDialog').hide()"
                                    update=":editViewTab :systemMessage"/>
                            <f:attribute name="Onto" value="Onto"/>
                            <p:treeNode>
                                <span class="colorCircle" style="background-color:#C0C0C0;"/>
                                <h:outputText styleClass="colorCircleText" value="#{ontoClass.name}"/>
                            </p:treeNode>
                        </p:tree>
                    </p:scrollPanel>
                </p:tab>
            </p:tabView>
        </p:panel>

    </h:form> 
</ui:composition>
